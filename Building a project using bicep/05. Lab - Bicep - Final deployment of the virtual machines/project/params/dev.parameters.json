{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "winWebAdminPassword":{
      "reference": {
        "keyVault": {
          "id": "/subscriptions/8180ff9b-39fc-42bf-9a0e-089b5d55027d/resourceGroups/app-grp/providers/Microsoft.KeyVault/vaults/cloudvault4000"
        },
        "secretName": "win-web-admin-password"
      }
    },
    "winWebConfig":{
      "value": {
        "vmSize":"Standard_D2s_v3",
        "adminUserName":"azureadmin",
        "baseName":"dev-web",
        "count":2
      }
    },
    "location":{"value": "eastus"},
    "storageAccountName" :{"value": "stcloudhublearningdeveus"},
    "vnet":{
        "value": {
            "name":"vnet-dev-eus",
            "addressPrefixes":["10.0.0.0/16"],
            "subnets":[
                {"name":"snet-dev-eus-web-01","prefix": "10.0.0.0/24"},
                {"name":"snet-dev-eus-db-01","prefix": "10.0.1.0/24"}
            ]
        }
    },
    "nsg":{
      "value": { 
        "name": "nsg-az104-shared-eus-01",
        "rules": [
          {
        "name": "in-allow-rdp-admin",
        "properties": {
          "description": "Allow RDP for admin access.",
          "protocol": "Tcp",
          "sourcePortRange": "*",
          "destinationPortRange": "3389",
          "sourceAddressPrefix": "*",
          "destinationAddressPrefix": "*",
          "access": "Allow",
          "priority": 400,
          "direction": "Inbound"
        }
      },
      {
        "name": "in-allow-http-from-internet-to-10-0-0-4",
        "properties": {
          "description": "Allow HTTP from the Internet service tag to 10.0.0.4.",
          "protocol": "Tcp",
          "sourcePortRange": "*",
          "destinationPortRange": "80",
          "sourceAddressPrefix": "Internet",
          "destinationAddressPrefix": "10.0.0.4",
          "access": "Allow",
          "priority": 410,
          "direction": "Inbound"
        }
      }
        ]
      }
    }
  }
}